/* ═══════════════════════════════════════════════
   COMPONENTES — Botones, Badges, Formularios,
   Toast, Modales, Spinners, Tabs
   ═══════════════════════════════════════════════ */

/* ── Loading ────────────────────────────────── */
#loading-screen {
  position: fixed; inset: 0;
  background: var(--bg);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  z-index: 9999; gap: 20px;
}
.spinner {
  width: 48px; height: 48px;
  border: 4px solid var(--border);
  border-top-color: var(--gold);
  border-radius: 50%;
  animation: spin 0.9s linear infinite;
}
.loading-txt {
  font-size: 0.9rem;
  color: var(--text-muted);
  letter-spacing: 0.1em;
}

/* ── Sync ───────────────────────────────────── */
.sync-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--success);
  display: inline-block;
  margin-right: 6px;
  animation: pulse 2s infinite;
}
.sync-dot.offline { background: var(--error); animation: none; }

/* ── Badges ─────────────────────────────────── */
.badge {
  font-family: 'DM Sans', sans-serif;
  font-size: 0.75rem; font-weight: 600;
  padding: 4px 12px; border-radius: 20px;
  background: var(--gold-glow);
  color: var(--gold-dark);
  border: 1px solid var(--gold);
  animation: fadeIn 0.3s ease;
}
.role-badge {
  font-size: 0.65rem; font-weight: 700;
  padding: 3px 10px; border-radius: 20px;
  text-transform: uppercase; letter-spacing: 0.05em;
}
.role-badge.admin   { background: var(--gold-glow); color: var(--gold-dark); border: 1px solid var(--gold); }
.role-badge.mesero  { background: rgba(74,111,165,0.12); color: var(--blue); border: 1px solid var(--blue); }
.role-badge.cocinero{ background: rgba(233,69,96,0.1); color: #e94560; border: 1px solid #e94560; }

/* ── Botones ────────────────────────────────── */
.btn-primary {
  padding: 10px 20px; border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
  color: #fff;
  font-family: 'DM Sans', sans-serif;
  font-size: 0.9rem; font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex; align-items: center; gap: 6px;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-md), var(--shadow-gold); }

.btn-ghost {
  padding: 10px 16px;
  border: 1.5px solid var(--border);
  border-radius: 10px;
  background: transparent;
  font-family: 'DM Sans', sans-serif;
  font-size: 0.85rem; font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex; align-items: center; gap: 6px;
}
.btn-ghost:hover {
  border-color: var(--gold); color: var(--gold-dark);
  background: var(--gold-glow); transform: translateY(-1px);
}

.btn-success {
  background: linear-gradient(135deg, var(--success) 0%, #1b4332 100%);
  color: #fff; border: none;
  padding: 12px 24px; border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600; font-size: 0.9rem;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex; align-items: center; gap: 8px;
}
.btn-success:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(45,106,79,0.3); }

.btn-danger {
  background: linear-gradient(135deg, var(--error) 0%, #a93226 100%);
  color: #fff; border: none;
  padding: 12px 24px; border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600; font-size: 0.9rem;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex; align-items: center; gap: 8px;
}
.btn-danger:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(192,57,43,0.3); }

.btn-warning {
  background: linear-gradient(135deg, var(--warning) 0%, var(--gold-dark) 100%);
  color: #fff; border: none;
  padding: 12px 24px; border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600; font-size: 0.9rem;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex; align-items: center; gap: 8px;
}
.btn-warning:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(201,168,76,0.3); }

.btn-blue {
  background: linear-gradient(135deg, var(--blue) 0%, #3d5a80 100%);
  color: #fff; border: none;
  padding: 12px 24px; border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600; font-size: 0.9rem;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex; align-items: center; gap: 8px;
}
.btn-blue:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(74,111,165,0.3); }

.cierre-btn {
  background: var(--text); color: #fff; border: none;
  padding: 10px 16px; border-radius: 10px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600; font-size: 0.85rem;
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex; align-items: center; gap: 6px;
}
.cierre-btn:hover { background: var(--accent); transform: translateY(-1px); }

.icon-btn {
  width: 40px; height: 40px;
  border: 2px solid var(--border);
  border-radius: 10px;
  background: var(--surface);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition-base);
}
.icon-btn:hover { border-color: var(--gold); background: var(--gold-glow); transform: scale(1.1); }

/* ── Formularios ────────────────────────────── */
.field { margin-bottom: 16px; }
.field label {
  display: block;
  font-size: 0.75rem; font-weight: 600;
  color: var(--text-secondary);
  letter-spacing: 0.05em; text-transform: uppercase;
  margin-bottom: 8px;
}
.field input,
.field select {
  width: 100%; padding: 12px 16px;
  border: 2px solid var(--border);
  border-radius: 12px;
  font-family: 'DM Sans', sans-serif;
  font-size: 0.95rem;
  background: var(--bg); color: var(--text);
  transition: all var(--transition-base);
}
.field input:focus,
.field select:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 4px var(--gold-glow);
}

/* ── Tabs ───────────────────────────────────── */
.tabs {
  display: flex; gap: 4px;
  background: var(--surface);
  padding: 16px 20px 0;
  border-bottom: 1px solid var(--border);
  overflow-x: auto;
}
@media (min-width: 768px) { .tabs { padding: 16px 32px 0; } }

.tab {
  padding: 12px 20px; border: none;
  background: transparent;
  font-family: 'DM Sans', sans-serif;
  font-size: 0.9rem; font-weight: 500;
  color: var(--text-muted);
  cursor: pointer; white-space: nowrap;
  border-bottom: 3px solid transparent;
  transition: all var(--transition-base);
  border-radius: 10px 10px 0 0;
  display: flex; align-items: center; gap: 8px;
}
.tab:hover  { color: var(--text-secondary); background: var(--bg); }
.tab.active { color: var(--gold-dark); border-bottom-color: var(--gold); font-weight: 600; background: var(--gold-glow); }
.tab.admin-only.active { color: var(--purple); border-bottom-color: var(--purple); background: rgba(123,104,238,0.08); }

/* ── Modal ──────────────────────────────────── */
.modal-overlay {
  position: fixed; inset: 0;
  background: rgba(44, 36, 27, 0.6);
  z-index: 200;
  display: none; align-items: flex-start; justify-content: center;
  padding: 0; overflow-y: auto;
  backdrop-filter: blur(8px);
}
@media (min-width: 600px) { .modal-overlay { padding: 24px; align-items: center; } }
.modal-overlay.open { display: flex; animation: fadeIn 0.3s ease; }

.modal {
  background: var(--surface);
  border-radius: 0; width: 100%; max-width: 100%;
  box-shadow: var(--shadow-lg);
  animation: slideUpModal 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  margin: 0; min-height: 100vh;
  border: 1px solid var(--border);
}
@media (min-width: 600px) {
  .modal {
    border-radius: 24px; max-width: 800px;
    margin: auto; min-height: unset;
    max-height: 90vh; overflow: hidden;
  }
}

.modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  position: sticky; top: 0;
  background: var(--surface); z-index: 10;
}
@media (min-width: 600px) { .modal-header { position: static; padding: 24px 32px; } }

.modal-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.4rem; color: var(--text);
  display: flex; align-items: center; gap: 10px;
}
.modal-close {
  width: 40px; height: 40px; border: none;
  background: var(--bg); border-radius: 12px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition-base);
}
.modal-close:hover { background: var(--border); transform: rotate(90deg); }

.modal-body {
  padding: 24px;
  max-height: calc(100vh - 80px);
  overflow-y: auto;
}
@media (min-width: 600px) { .modal-body { padding: 32px; max-height: calc(90vh - 80px); } }

.modal-actions {
  display: flex; gap: 12px; flex-wrap: wrap;
  margin-top: 24px; padding-top: 24px;
  border-top: 1px solid var(--border);
}

/* ── Toast (SIN EMOJIS - CON ICONOS SVG) ───── */
.toast {
  position: fixed; bottom: 90px; right: 24px;
  background: var(--surface);
  border: 2px solid var(--gold);
  color: var(--text);
  padding: 16px 24px; border-radius: 16px;
  font-size: 0.95rem; z-index: 9999;
  animation: toastSlide 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: var(--shadow-lg), var(--shadow-gold);
  max-width: 360px;
  display: flex; align-items: center; gap: 12px;
  backdrop-filter: blur(10px);
}
@media (min-width: 768px) { .toast { bottom: 32px; right: 32px; } }

/* Icono por defecto en toast */
.toast::before {
  content: '';
  width: 24px; height: 24px;
  background: var(--gold);
  border-radius: 50%; flex-shrink: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E%3C/svg%3E");
  background-size: 14px; background-position: center; background-repeat: no-repeat;
}

/* Variantes de toast con colores e iconos diferentes */
.toast-success {
  border-left: 4px solid var(--success);
  border-color: var(--success);
}
.toast-success::before {
  background: var(--success);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E%3C/svg%3E");
  background-size: 14px; background-position: center; background-repeat: no-repeat;
}

.toast-error {
  border-left: 4px solid var(--error);
  border-color: var(--error);
}
.toast-error::before {
  background: var(--error);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M18 6 6 18M6 6l12 12'/%3E%3C/svg%3E");
  background-size: 14px; background-position: center; background-repeat: no-repeat;
}

.toast-warning {
  border-left: 4px solid var(--warning);
  border-color: var(--warning);
}
.toast-warning::before {
  background: var(--warning);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4m0 4h.01'/%3E%3C/svg%3E");
  background-size: 14px; background-position: center; background-repeat: no-repeat;
}

/* Iconos SVG dentro del toast */
.toast svg {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

/* ── Categorías ─────────────────────────────── */
.cat-tabs { display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap; }
.cat-tab {
  padding: 8px 16px;
  border: 2px solid var(--border); border-radius: 100px;
  background: var(--bg);
  font-family: 'DM Sans', sans-serif;
  font-size: 0.8rem; font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-bounce);
  color: var(--text-secondary);
  display: flex; align-items: center; gap: 6px;
}
.cat-tab:hover { border-color: var(--gold); color: var(--gold-dark); transform: translateY(-2px); }
.cat-tab.active { color: #fff; border-color: transparent; transform: scale(1.05); box-shadow: var(--shadow-md); }
.cat-tab[data-cat="todos"].active  { background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%); }
.cat-tab[data-cat="bebida"].active { background: linear-gradient(135deg, var(--blue) 0%, #3d5a80 100%); }
.cat-tab[data-cat="comida"].active { background: linear-gradient(135deg, var(--success) 0%, #1b4332 100%); }
.cat-tab[data-cat="postre"].active { background: linear-gradient(135deg, var(--purple) 0%, #5a4fcf 100%); }

/* ── Pcat ───────────────────────────────────── */
.pcat {
  font-size: 0.75rem; font-weight: 700;
  padding: 4px 12px; border-radius: 20px;
  margin-top: 8px;
  display: inline-flex; align-items: center; gap: 4px;
  text-transform: uppercase; letter-spacing: 0.05em;
}
.pcat.bebida  { background: rgba(74,111,165,0.1); color: var(--blue); border: 1px solid var(--blue); }
.pcat.comida  { background: rgba(45,106,79,0.1); color: var(--success); border: 1px solid var(--success); }
.pcat.postre  { background: rgba(123,104,238,0.1); color: var(--purple); border: 1px solid var(--purple); }

/* ── Tabla historial ────────────────────────── */
.table-wrap {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  background: var(--surface);
  border-radius: 16px;
  border: 2px solid var(--border);
  box-shadow: var(--shadow-sm);
}
.history-table {
  width: 100%;
  border-collapse: separate; border-spacing: 0;
  font-size: 0.9rem; min-width: 600px;
}
.history-table th {
  padding: 16px; text-align: left;
  border-bottom: 2px solid var(--border);
  font-size: 0.75rem; text-transform: uppercase;
  letter-spacing: 0.08em; color: var(--text-muted);
  font-weight: 700; background: var(--bg);
}
.history-table td {
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
  color: var(--text-secondary);
  transition: all var(--transition-fast);
}
.history-table tr:hover td { background: var(--bg); color: var(--text); }
.history-table .total-row td {
  font-weight: 700; color: var(--text);
  border-top: 2px solid var(--border);
  border-bottom: none;
  background: var(--gold-glow);
}

/* ── Empty state ────────────────────────────── */
.empty-state {
  text-align: center; padding: 60px 24px;
  color: var(--text-muted);
}
.empty-state .icon { width: 64px; height: 64px; margin-bottom: 16px; opacity: 0.5; }

/* ── Stat cards ─────────────────────────────── */
.stat-card {
  background: var(--surface);
  border-radius: 16px; border: 2px solid var(--border);
  padding: 24px;
  transition: all var(--transition-base);
}
.stat-card:hover { border-color: var(--gold); transform: translateY(-2px); box-shadow: var(--shadow-sm); }
.stat-val { font-family: 'Playfair Display', serif; font-size: 2rem; color: var(--gold-dark); font-weight: 700; }
@media (min-width: 600px) { .stat-val { font-size: 2.4rem; } }
.stat-lbl { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); margin-top: 6px; font-weight: 500; }

/* ── Login ──────────────────────────────────── */
#login-screen {
  position: fixed; inset: 0;
  background: linear-gradient(135deg, var(--bg) 0%, var(--bg-warm) 100%);
  display: none; align-items: center; justify-content: center;
  z-index: 999;
}
#login-screen.show { display: flex; animation: fadeIn 0.5s ease; }

.login-card {
  background: var(--surface); border-radius: 20px;
  padding: 48px 40px;
  box-shadow: var(--shadow-lg);
  width: 100%; max-width: 440px;
  text-align: center;
  border: 1px solid var(--border);
  animation: slideUp 0.5s ease;
}
.login-logo {
  font-family: 'Playfair Display', serif;
  font-size: 2.6rem; color: var(--gold);
  margin-bottom: 8px;
  display: flex; align-items: center; justify-content: center; gap: 12px;
}
.login-sub {
  color: var(--text-muted); font-size: 0.85rem;
  letter-spacing: 0.15em; text-transform: uppercase;
  margin-bottom: 40px;
}
.login-field { text-align: left; margin-bottom: 20px; }
.login-field label {
  display: block; font-size: 0.75rem; font-weight: 600;
  color: var(--text-secondary);
  letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 8px;
}
.login-field input {
  width: 100%; padding: 14px 16px;
  border: 2px solid var(--border); border-radius: 12px;
  font-family: 'DM Sans', sans-serif; font-size: 1rem;
  background: var(--bg); color: var(--text);
  transition: all var(--transition-base);
}
.login-field input:focus { outline: none; border-color: var(--gold); box-shadow: 0 0 0 4px var(--gold-glow); }
.login-btn {
  width: 100%; padding: 16px;
  background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
  color: #fff; border: none; border-radius: 12px;
  font-size: 1rem; font-weight: 600; cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  transition: all var(--transition-bounce);
  margin-top: 12px; position: relative; overflow: hidden;
}
.login-btn::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2), transparent);
  transform: translateX(-100%); transition: transform 0.6s;
}
.login-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-md), var(--shadow-gold); }
.login-btn:hover::before { transform: translateX(100%); }
.login-btn:active { transform: scale(0.98); }
.login-err {
  color: var(--error); font-size: 0.85rem; margin-top: 16px; min-height: 20px;
  display: flex; align-items: center; justify-content: center; gap: 6px;
}

/* ── Ticket impresión ───────────────────────── */
#ticket-print { display: none; }
@media print {
  @page { size: 80mm auto; margin: 0; }
  * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  body > *:not(#ticket-print) { display: none !important; }
  #ticket-print { display: block !important; position: fixed; inset: 0; background: #fff; z-index: 99999; }
}
.ticket-wrap {
  width: 72mm; max-width: 302px; margin: 0 auto;
  font-family: 'Courier New', Courier, monospace;
  font-size: 11pt; line-height: 1.5; color: #000; background: #fff; padding: 3mm 4mm;
}
.ticket-title  { text-align: center; font-size: 15pt; font-weight: 900; letter-spacing: 2px; font-family: 'Playfair Display', serif; }
.ticket-sub    { text-align: center; font-size: 9pt; margin-bottom: 4mm; color: #444; }
.ticket-div    { border: none; border-top: 1px dashed #000; margin: 3mm 0; width: 100%; }
.ticket-row    { display: flex; justify-content: space-between; margin: 1mm 0; font-size: 10pt; }
.ticket-row.bold  { font-weight: 700; }
.ticket-row.total { font-weight: 900; font-size: 13pt; border-top: 2px solid #000; margin-top: 3mm; padding-top: 2mm; }
.ticket-center { text-align: center; font-size: 9pt; margin-top: 4mm; color: #555; }
.ticket-cat-hdr{ font-size: 9pt; font-weight: 700; margin-top: 4mm; margin-bottom: 1mm; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #ccc; padding-bottom: 1mm; }
.ticket-item-name  { flex: 1; padding-right: 4mm; word-break: break-word; }
.ticket-item-price { white-space: nowrap; text-align: right; font-weight: 700; }
.ticket-corte  { border: none; border-top: 2px dashed #000; margin: 6mm 0 0; width: 100%; }

/* ── Animaciones ────────────────────────────── */
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUpModal { from { opacity: 0; transform: translateY(40px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes toastSlide { from { opacity: 0; transform: translateX(100%); } to { opacity: 1; transform: translateX(0); } }
